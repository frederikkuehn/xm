{
    "swagger": "2.0",
    "basePath": "/kafka",
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "schemes": [
        "https"
    ],
    "info": {
        "title": "Paul's revisions topic spec",
        "description": "Paul's revisions topic spec",
        "version": "1"
    },
    "paths": {
        "/revisions": {
            "post": {
                "summary": "revisions topic messages",
                "description": "revisions topic messages",
                "operationId": "revisions",
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Revision"
                        }
                    }
                ],
                "responses": {
                    "202": {
                        "description": "Accepted"
                    }
                },
                "tags": [
                    "Kafka"
                ]
            }
        }
    },
    "definitions": {
        "Event": {
            "description": "An event in the xMatters system",
            "properties": {
                "id": {
                    "description": "An identifier (UUID) that represents this resource",
                    "type": "string",
                    "format": "uuid"
                },
                "eventId": {
                    "description": "A legacy identifier (numeric) that represents this resource",
                    "type": "string"
                },
                "bypassPhoneIntro": {
                    "type": "boolean"
                },
                "created": {
                    "format": "date-time",
                    "type": "string"
                },
                "escalationOverride": {
                    "type": "boolean"
                },
                "expirationInMinutes": {
                    "type": "integer"
                },
                "terminated": {
                    "format": "date-time",
                    "type": "string"
                },
                "incident": {
                    "type": "string"
                },
                "otherResponseCount": {
                    "type": "integer"
                },
                "overrideDeviceRestrictions": {
                    "type": "boolean"
                },
                "priority": {
                    "type": "string",
                    "enum": [
                        "LOW",
                        "MEDIUM",
                        "HIGH"
                    ]
                },
                "requirePhonePassword": {
                    "type": "boolean"
                },
                "responseCountsEnabled": {
                    "default": false,
                    "type": "boolean"
                },
                "requestId": {
                    "type": "string",
                    "format": "uuid"
                },
                "status": {
                    "enum": [
                        "ACTIVE",
                        "SUSPENDED",
                        "TERMINATED"
                    ],
                    "type": "string"
                },
                "voicemailOptions": {
                    "description": "Voicemail Options",
                    "properties": {
                        "every": {
                            "type": "integer"
                        },
                        "leave": {
                            "type": "string"
                        },
                        "retry": {
                            "type": "integer"
                        }
                    }
                },
                "senderOverrides": {
                    "type": "object"
                },
                "properties": {
                    "description": "Map of property names and values",
                    "type": "object"
                },
                "conference": {
                    "$ref": "#/definitions/ConferenceReference"
                },
                "form": {
                    "$ref": "#/definitions/FormReference"
                },
                "submitter": {
                    "$ref": "#/definitions/PersonReference"
                },
                "integration": {
                    "$ref": "#/definitions/IntegrationReference"
                },
                "revision": {
                    "description": "Integer that increases to indicate revision of this entity, unlikely to be sequential as it is generated from a table specific sequence",
                    "type": "integer",
                    "format": "int64"
                }
            },
            "required": [
                "id",
                "eventId",
                "created",
                "status",
                "priority"
            ]
        },
        "EventReference": {
            "description": "A reference to an event",
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                }
            },
            "required": [
                "id"
            ]
        },
        "ConferenceReference": {
            "properties": {
                "bridgeId": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "enum": [
                        "BRIDGE",
                        "EXTERNAL"
                    ]
                }
            },
            "required": [
                "type",
                "bridgeId"
            ]
        },
        "FormReference": {
            "description": "A reference to a form",
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                }
            },
            "required": [
                "id"
            ]
        },
        "IntegrationReference": {
            "description": "A reference to an integration",
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                }
            },
            "required": [
                "id"
            ]
        },
        "ServiceProviderReference": {
            "description": "A reference to a ServiceProvider",
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                }
            },
            "required": [
                "id"
            ]
        },
        "Recipient": {
            "discriminator": "recipientType",
            "properties": {
                "id": {
                    "description": "A unique identifier (UUID) for this entity",
                    "type": "string",
                    "format": "uuid"
                },
                "targetName": {
                    "description": "An identifier such as a name that can be used to identify a resource",
                    "type": "string"
                },
                "recipientType": {
                    "type": "string",
                    "enum": [
                        "PERSON",
                        "DEVICE",
                        "GROUP",
                        "DYNAMIC_TEAM",
                        "SITE",
                        "ROLE"
                    ]
                },
                "status": {
                    "description": "Whether the recipient is active. Inactive recipients do not receive notifications",
                    "type": "string",
                    "enum": [
                        "ACTIVE",
                        "INACTIVE",
                        "INVALID"
                    ]
                },
                "externalKey": {
                    "description": "Identifies this resource in an external system. Used when externallyOwned is true",
                    "type": "string"
                },
                "externallyOwned": {
                    "description": "True if this resource is managed by an external system. Externally-owned resources cannot be deleted in the xMatters user interface",
                    "type": "boolean"
                },
                "targeted": {
                    "description": "Indicates if this is a targeted recipient. If omitted assume false",
                    "type": "boolean"
                },
                "locked": {
                    "description": "Lists the fields of externally-owned objects that are locked and cannot be modified in the xMatters user interface",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "responseCount": {
                    "description": "Number of responses required before xMatters stops notifying targeted group or dynamic team",
                    "type": "integer",
                    "minimum": 1
                },
                "revision": {
                    "description": "Integer that increases to indicate revision of this entity, unlikely to be sequential as it is generated from a table specific sequence",
                    "type": "integer",
                    "format": "int64"
                }
            },
            "required": [
                "id",
                "targetName",
                "recipientType",
                "externallyOwned",
                "status",
                "revision"
            ]
        },
        "Group": {
            "description": "Group are used for collecting users and devices and organizing them into notification schedules",
            "allOf": [
                {
                    "$ref": "#/definitions/Recipient"
                }
            ],
            "properties": {
                "recipientType": {
                    "enum": [
                        "GROUP"
                    ],
                    "type": "string"
                },
                "allowDuplicates": {
                    "type": "boolean"
                },
                "description": {
                    "type": "string"
                },
                "observedByAll": {
                    "type": "boolean"
                },
                "useDefaultDevices": {
                    "type": "boolean"
                },
                "site": {
                    "$ref": "#/definitions/SiteReference"
                }
            },
            "required": [
                "allowDuplicates",
                "observedByAll",
                "useDefaultDevices"
            ]
        },
        "GroupReference": {
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                }
            }
        },
        "Person": {
            "description": "Someone in the xMatters system who can receive notifications is called a 'Person'. Every person in the xMatters system is a user defined by a set of details, including ID number, user name, login password, and so on. deliveryStatus, notifications, and response are dynamic derived attributes and will only appear when viewing the person as an event recipient",
            "allOf": [
                {
                    "$ref": "#/definitions/Recipient"
                }
            ],
            "properties": {
                "recipientType": {
                    "type": "string",
                    "enum": [
                        "PERSON"
                    ]
                },
                "language": {
                    "description": "The preferred language of the user: Example: en",
                    "type": "string"
                },
                "phoneLogin": {
                    "description": "A numeric string that identifies users when they phone in to xMatters. This string may contain only digits and must be unique within the company",
                    "type": "string"
                },
                "timezone": {
                    "description": "The time zone of the user. Example:  US/Pacific",
                    "type": "string"
                },
                "webLogin": {
                    "description": "The ID of the user when they log on to the web user interface. This value must be unique within the company and is often identical to the targetName field",
                    "type": "string"
                },
                "properties": {
                    "description": "Key/Value map of custom properties",
                    "type": "object"
                },
                "site": {
                    "$ref": "#/definitions/SiteReference"
                }
            }
        },
        "PersonReference": {
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                }
            }
        },
        "Device": {
            "description": "A device",
            "allOf": [
                {
                    "$ref": "#/definitions/Recipient"
                }
            ],
            "properties": {
                "recipientType": {
                    "type": "string",
                    "enum": [
                        "DEVICE"
                    ]
                },
                "defaultDevice": {
                    "description": "True if this device can receive notifications when the user has no active devices",
                    "type": "boolean"
                },
                "delay": {
                    "description": "The number of minutes to wait for a response before contacting the next device",
                    "format": "int32",
                    "type": "integer"
                },
                "deviceType": {
                    "description": "The type of the device",
                    "type": "string",
                    "enum": [
                        "ANDROID_PUSH",
                        "APPLE_PUSH",
                        "BLACKBERRY_PUSH",
                        "BROWSER",
                        "EMAIL",
                        "FAX",
                        "GENERIC",
                        "IM",
                        "NUMERIC_PAGER",
                        "TEXT_PAGER",
                        "TEXT_PHONE",
                        "VOICE",
                        "VOICE_IVR"
                    ]
                },
                "name": {
                    "description": "The name of the device. Example: Work Email, Home Phone",
                    "type": "string"
                },
                "description": {
                    "description": "A description of the device",
                    "type": "string"
                },
                "priorityThreshold": {
                    "description": "The minimum priority of an event for it to be delivered to this device",
                    "type": "string",
                    "enum": [
                        "LOW",
                        "HIGH",
                        "MEDIUM"
                    ]
                },
                "sequence": {
                    "description": "The order in which the device will be contacted, where 0 represents the first device contacted",
                    "format": "int32",
                    "type": "integer"
                },
                "testStatus": {
                    "description": "Whether the device has been tested",
                    "type": "string",
                    "enum": [
                        "TESTED",
                        "UNTESTED",
                        "PENDING",
                        "INVALID"
                    ]
                },
                "provider": {
                    "$ref": "#/definitions/ServiceProviderReference"
                },
                "owner": {
                    "$ref": "#/definitions/PersonReference"
                }
            }
        },
        "Shift": {
            "properties": {
                "id": {
                    "type": "string"
                },
                "group": {
                    "$ref": "#/definitions/GroupReference"
                },
                "name": {
                    "type": "string"
                },
                "revision": {
                    "description": "Integer that increases to indicate revision of this entity, unlikely to be sequential as it is generated from a table specific sequence",
                    "type": "integer",
                    "format": "int64"
                }
            },
            "required": [
                "id",
                "group",
                "name",
                "revision"
            ]
        },
        "Site": {
            "description": "Site",
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                },
                "name": {
                    "type": "string"
                },
                "address1": {
                    "type": "string"
                },
                "address2": {
                    "type": "string"
                },
                "city": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "latitude": {
                    "format": "double",
                    "type": "number"
                },
                "longitude": {
                    "format": "double",
                    "type": "number"
                },
                "postalCode": {
                    "type": "string"
                },
                "state": {
                    "type": "string"
                },
                "timezone": {
                    "type": "string"
                },
                "revision": {
                    "description": "Integer that increases to indicate revision of this entity, unlikely to be sequential as it is generated from a table specific sequence",
                    "type": "integer",
                    "format": "int64"
                }
            },
            "required": [
                "id",
                "name",
                "revision"
            ]
        },
        "SiteReference": {
            "description": "Site",
            "properties": {
                "id": {
                    "description": "The identifier of the resource",
                    "type": "string",
                    "format": "uuid"
                }
            }
        },
        "OnCallReminderSchedule": {
            "description": "On call reminder schedule configuration",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "A unique identifier (UUID) for this entity",
                    "format": "uuid"
                },
                "person": {
                    "$ref": "#/definitions/PersonReference"
                }
            },
            "required": [
                "id"
            ]
        },
        "Revision": {
            "description": "A revision",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "A unique identifier (UUID) for this entity"
                },
                "at": {
                    "description": "The timestamp this revision became effective",
                    "type": "string",
                    "format": "date-time"
                },
                "type": {
                    "type": "string",
                    "enum": [
                        "EVENT",
                        "GROUP",
                        "ON_CALL_REMINDER_SCHEDULE",
                        "PERSON",
                        "SHIFT",
                        "SITE"
                    ]
                }
            },
            "required": [
                "id",
                "at",
                "type"
            ]
        },
        "EventRevision": {
            "description": "An event revision",
            "allOf": [
                {
                    "$ref": "#/definitions/Revision"
                }
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "EVENT"
                    ]
                },
                "event": {
                    "$ref": "#/definitions/Event"
                }
            },
            "required": [
                "type",
                "event"
            ]
        },
        "GroupRevision": {
            "description": "A group revision",
            "allOf": [
                {
                    "$ref": "#/definitions/Revision"
                }
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "GROUP"
                    ]
                },
                "group": {
                    "$ref": "#/definitions/Group"
                }
            },
            "required": [
                "type",
                "group"
            ]
        },
        "PersonRevision": {
            "description": "A person revision",
            "allOf": [
                {
                    "$ref": "#/definitions/Revision"
                }
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "PERSON"
                    ]
                },
                "person": {
                    "$ref": "#/definitions/Person"
                }
            },
            "required": [
                "type",
                "person"
            ]
        },
        "DeviceRevision": {
            "description": "A device revision",
            "allOf": [
                {
                    "$ref": "#/definitions/Revision"
                }
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "DEVICE"
                    ]
                },
                "device": {
                    "$ref": "#/definitions/Device"
                }
            },
            "required": [
                "type",
                "device"
            ]
        },
        "OnCallReminderScheduleRevision": {
            "description": "An on call reminder schedule revision",
            "allOf": [
                {
                    "$ref": "#/definitions/Revision"
                }
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "ON_CALL_REMINDER_SCHEDULE"
                    ]
                },
                "onCallReminderSchedule": {
                    "$ref": "#/definitions/OnCallReminderSchedule"
                }
            },
            "required": [
                "type",
                "onCallReminderSchedule"
            ]
        },
        "ShiftRevision": {
            "description": "A shift revision",
            "allOf": [
                {
                    "$ref": "#/definitions/Revision"
                }
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "SHIFT"
                    ]
                },
                "shift": {
                    "$ref": "#/definitions/Shift"
                }
            },
            "required": [
                "type",
                "shift"
            ]
        },
        "SiteRevision": {
            "description": "A site revision",
            "allOf": [
                {
                    "$ref": "#/definitions/Revision"
                }
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "SITE"
                    ]
                },
                "site": {
                    "$ref": "#/definitions/Site"
                }
            },
            "required": [
                "type",
                "site"
            ]
        }
    },
    "parameters": {},
    "responses": {}
}
